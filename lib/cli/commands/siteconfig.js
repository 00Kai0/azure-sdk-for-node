/*** Generated by streamline 0.4.5 (callbacks) - DO NOT EDIT ***/ var __rt=require('streamline/lib/callbacks/runtime').runtime(__filename),__func=__rt.__func,__cb=__rt.__cb; var common = require("../common");















var fs = require("fs");
var path = require("path");
var url = require("url");
var crypto = require("crypto");
var pfx2pem = require("../../util/certificates/pkcs").pfx2pem;
var Channel = require("../channel");
var async = require("async");
var utils = require("../utils");
var constants = require("../constants");
var cacheUtils = require("../cacheUtils");

var linkedRevisionControl = require("../linkedrevisioncontrol");

exports.init = function(cli) {

  var log = cli.output;
  var site = cli.category("site");
  var siteConfig = site.category("config").description("Commands to manage your site configurations");


  function getChannel() {
    var account = cli.category("account");
    var managementEndpoint = url.parse(utils.getManagementEndpointUrl(account.managementEndpointUrl()));
    var pem = account.managementCertificate();
    var host = managementEndpoint.hostname;
    var port = managementEndpoint.port;

    var channel = new Channel({
      host: host,
      port: port,
      key: pem.key,
      cert: pem.cert
    }).header("x-ms-version", "2011-02-25");

    var proxyString = (((process.env.HTTPS_PROXY || process.env.https_proxy) || process.env.ALL_PROXY) || process.env.all_proxy);





    if ((proxyString !== undefined)) {
      var proxyUrl = url.parse(proxyString);
      if (((proxyUrl.protocol !== "http:") && (proxyUrl.protocol !== "https:"))) {


        proxyUrl = url.parse(("http://" + proxyString)); } ;


      channel = channel.add({ proxy: proxyUrl }); } ;


    return channel; };


  siteConfig.command("list [name]").whiteListPowershell().usage("[options] <commitId> [name]").description("Show your git deployment").option("-s, --subscription <id>", "use the subscription id").execute(function __1(name, options, _) { var context, siteConfigurations; var __frame = { name: "__1", line: 76 }; return __func(_, this, arguments, __1, 2, __frame, function __$__1() {





      context = {
        subscription: cli.category("account").lookupSubscriptionId(options.subscription),
        site: {
          name: name } };



      return site.lookupSiteNameAndWebSpace(context, __cb(_, __frame, 8, 6, function __$__1() {

        return site.doSiteConfigGet(context, __cb(_, __frame, 10, 31, function ___(__0, __1) { siteConfigurations = __1;
          if ((siteConfigurations.AppSettings.length > 0)) {
            log.table(siteConfigurations.AppSettings, function(row, item) {
              row.cell("Name", item.GeoRegion); }); }

           else {
            log.info("No app settings defined yet. You can define app settings using \"azure site config sites created yet. You can create new sites using \"azure site create\" or through the portal."); } ; _(); }, true)); }, true)); }); });};